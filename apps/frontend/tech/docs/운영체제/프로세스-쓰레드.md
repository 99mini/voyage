---
sidebar_position: 1
slug: process-vs-thread
title: '프로세스와 쓰레드'
authors: [99mini]
tags: [운영체제]
---

프로세스와 쓰레드

<!-- truncate -->

### 프로세스와 쓰레드

| 항목      | 프로세스 (Process)                                 | 쓰레드 (Thread)                                     |
| --------- | -------------------------------------------------- | --------------------------------------------------- |
| 정의      | 실행 중인 프로그램의 인스턴스                      | 프로세스 내에서 실행되는 흐름의 단위                |
| 독립성    | 각각 독립적인 메모리 공간을 가짐                   | 같은 프로세스의 쓰레드는 메모리 자원을 공유         |
| 자원      | 코드, 데이터, 힙, 스택을 독립적으로 소유           | 코드, 데이터, 힙은 공유하되, 스택은 개별적으로 가짐 |
| 생성 비용 | 상대적으로 비용이 큼 (메모리 할당, PCB 생성 등)    | 비용이 적고 빠르게 생성됨                           |
| 통신 방식 | 프로세스 간 통신(IPC: 파이프, 소켓 등) 필요        | 같은 메모리 공간을 공유하므로 간단                  |
| 안정성    | 하나의 프로세스가 죽어도 다른 프로세스에 영향 없음 | 하나의 쓰레드가 죽으면 전체 프로세스에 영향 가능    |
| 예시      | 브라우저, 텍스트 에디터                            | 탭마다 독립된 쓰레드, 워드에서 맞춤법 검사 쓰레드   |

### 구조

```text
[ 프로세스 구조 ]

+-----------------------------+
| 코드 (Code Segment)          |
+-----------------------------+
| 데이터 (Data)                 |
+-----------------------------+
| 힙 (Heap)                    |
+-----------------------------+
| 스택 (Stack)                 |
+-----------------------------+
| PCB (Process Control Block) |
+-----------------------------+


[ 쓰레드 구조 - 프로세스 내부 ]

+-----------------------------+
| 코드 (공유)                   |
+-----------------------------+
| 데이터 (공유)                  |
+-----------------------------+
| 힙 (공유)                     |
+-----------------------------+
| 스택 (개별)                   |
+-----------------------------+
| TCB (Thread Control Block)  |
+-----------------------------+
```

| 항목           | 프로세스             | 쓰레드                          |
| -------------- | -------------------- | ------------------------------- |
| 메모리 공간    | 독립적               | 공유                            |
| 생성/관리 비용 | 높음                 | 낮음                            |
| 통신 방식      | IPC 필요             | 공유 메모리를 통한 간단한 통신  |
| 장애 영향      | 독립적 (안정성 높음) | 하나의 쓰레드 장애 시 전체 영향 |

### 데이터 공유

#### 프로세스 간 메모리 공유 (Inter-Process Communication, IPC)

> 기본 원칙: 프로세스는 서로 독립된 메모리 공간을 가지므로, 기본적으로는 직접 메모리를 공유할 수 없습니다. 이를 위해 운영체제가 제공하는 IPC 메커니즘을 사용합니다

**대표적인 IPC 방법**

| 방법                        | 설명                                                        | 특징                      |
| --------------------------- | ----------------------------------------------------------- | ------------------------- |
| 공유 메모리 (Shared Memory) | 메모리의 일부를 여러 프로세스가 함께 접근할 수 있도록 설정  | 가장 빠름, 동기화 필요    |
| 메시지 큐 (Message Queue)   | 운영체제 커널이 관리하는 큐를 통해 메시지를 주고받음        | 구조적이고 안정적         |
| 파이프 (Pipe)               | 한 프로세스의 출력이 다른 프로세스의 입력이 되도록 연결     | 부모-자식 간 자주 사용    |
| 소켓 (Socket)               | 네트워크를 통해 통신 (같은 머신에서도 사용 가능)            | 유연성 높고 네트워크 사용 |
| 메모리 맵 파일 (mmap)       | 파일 내용을 여러 프로세스에서 공유하는 메모리 영역으로 매핑 | 공유 메모리와 유사        |

#### 쓰레드 간 메모리 공유

> 기본 원칙: 쓰레드는 동일한 프로세스 내에서 실행되기 때문에 기본적으로 코드, 데이터, 힙 영역은 공유합니다. 단, 스택은 각각 따로 가짐.

**공유 가능한 메모리 영역**

| 메모리 영역 | 공유 여부 | 예시                            |
| ----------- | --------- | ------------------------------- |
| 코드 영역   | ✅ 공유   | 함수, 명령어 등                 |
| 데이터 영역 | ✅ 공유   | 전역 변수, static 변수          |
| 힙 영역     | ✅ 공유   | 동적으로 할당된 메모리 (malloc) |
| 스택 영역   | ❌ 비공유 | 지역 변수, 함수 호출 스택       |
